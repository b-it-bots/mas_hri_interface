<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Lucy web interface</title>
        <link rel="stylesheet" type="text/css" href="styles/index.css">
        <script src="scripts/jquery-3.3.1.min.js"></script>
        <script src="scripts/roslib.min.js"></script>
        <script type="text/javascript" >

            var ros = new ROSLIB.Ros({
                url: "ws://10.18.1.10:9090"
            })

            ros.on("connection", function() {
                console.log("Connection to websocket server established.")
            })

            ros.on('error', function(error) {
                console.log('Error connecting to websocket server: ', error);
            });

            ros.on('close', function() {
                console.log('Connection to websocket server closed.');
            });

            var listener_subscriber = new ROSLIB.Topic({
                ros : ros,
                name : "/speech_recognizer",
                messageType : "std_msgs/String"
            });

            listener_subscriber.subscribe(function(message) {
                console.log('Received message on ' + listener_subscriber.name + ': ' + message.data);
                localStorage.setItem("speech", message.data);
                location.reload();
                var go_2019_speech_recognizer = document.getElementById("#go_2019_speech_recognizer")
                go_2019_speech_recognizer.value = message.data
            });
        </script>
    </head>
    <body >
        <div id='main'>
            <div id='go_2019_arena_map'></div>
            <div id='go_2019_speech_recognizer'></div>
        </div>
    </body>
</html>
